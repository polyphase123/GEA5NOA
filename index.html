<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GEA-5 Offshore Wind Professional Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');
        
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #0f172a; -webkit-tap-highlight-color: transparent; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 4px; height: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        
        .sidebar-link.active {
            background-color: #0f172a;
            color: #ffffff;
            border-left: 4px solid #10b981;
        }
        .sidebar-link:hover:not(.active) {
            background-color: #e2e8f0;
            color: #0f172a;
        }

        .mobile-nav-item.active {
            color: #10b981;
        }
        .mobile-nav-item {
            color: #64748b;
        }
        
        .card-shadow { box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1); }
        .input-base {
            @apply w-full rounded-md border-slate-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500 text-sm py-2 px-3 border;
        }
        
        /* Mobile optimizations */
        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- Icon System ---
        const Icon = ({ name, size = 20, className = "" }) => {
            const icons = {
                wind: <><path d="M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2" /><path d="M9.6 4.6A2 2 0 1 1 11 8H2" /><path d="M12.6 19.4A2 2 0 1 0 14 16H2" /></>,
                dashboard: <><rect width="7" height="9" x="3" y="3" rx="1" /><rect width="7" height="5" x="14" y="3" rx="1" /><rect width="7" height="9" x="14" y="12" rx="1" /><rect width="7" height="5" x="3" y="16" rx="1" /></>,
                calendar: <><rect width="18" height="18" x="3" y="4" rx="2" ry="2" /><line x1="16" x2="16" y1="2" y2="6" /><line x1="8" x2="8" y1="2" y2="6" /><line x1="3" x2="21" y1="10" y2="10" /></>,
                zap: <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" />,
                calculator: <><rect width="16" height="20" x="4" y="2" rx="2" /><line x1="8" x2="16" y1="6" y2="6" /><line x1="16" x2="16" y1="14" y2="18" /><path d="M16 10h.01" /><path d="M12 10h.01" /><path d="M8 10h.01" /><path d="M12 14h.01" /><path d="M8 14h.01" /><path d="M12 18h.01" /><path d="M8 18h.01" /></>,
                fileText: <><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z" /><polyline points="14 2 14 8 20 8" /><line x1="16" x2="8" y1="13" y2="13" /><line x1="16" x2="8" y1="17" y2="17" /><line x1="10" x2="8" y1="9" y2="9" /></>,
                anchor: <><circle cx="12" cy="5" r="3" /><line x1="12" x2="12" y1="22" y2="8" /><path d="M5 12H2a10 10 0 0 0 20 0h-3" /></>,
                check: <polyline points="20 6 9 17 4 12" />,
                alert: <><circle cx="12" cy="12" r="10" /><line x1="12" x2="12" y1="8" y2="12" /><line x1="12" x2="12.01" y1="16" y2="16" /></>,
                chevronRight: <path d="m9 18 6-6-6-6" />,
                trendingUp: <><polyline points="23 6 13.5 15.5 8.5 10.5 1 18" /><polyline points="17 6 23 6 23 12" /></>,
                hardHat: <><path d="M2 18a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v2z" /><path d="M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5" /><path d="M4 15v-3a6 6 0 0 1 6-6h0" /><path d="M14 6h0a6 6 0 0 1 6 6v3" /></>,
                gavel: <><path d="m14 13-7.5 7.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L11 10" /><path d="m16 16 6-6" /><path d="m8 8 6-6" /><path d="m9 7 8 8" /><path d="m21 11-8-8" /></>,
                download: <><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" /><polyline points="7 10 12 15 17 10" /><line x1="12" x2="12" y1="15" y2="3" /></>,
                menu: <><line x1="4" x2="20" y1="12" y2="12" /><line x1="4" x2="20" y1="6" y2="6" /><line x1="4" x2="20" y1="18" y2="18" /></>
            };
            
            return (
                <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    {icons[name] || <circle cx="12" cy="12" r="10" />}
                </svg>
            );
        };

        // --- Date Logic Helper ---
        const addDays = (startDate, days, type = 'CD') => {
            let result = new Date(startDate);
            if (type === 'CD') {
                result.setDate(result.getDate() + days);
            } else {
                let count = 0;
                while (count < days) {
                    result.setDate(result.getDate() + 1);
                    // 0 = Sun, 6 = Sat. Skip if weekend.
                    if (result.getDay() !== 0 && result.getDay() !== 6) {
                        count++;
                    }
                }
            }
            return result.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
        };

        // --- Data Warehouse ---
        const START_DATE = new Date("2025-11-24"); // Set default to Nov 24, 2025

        const timelineDetails = [
            { step: 1, activity: "Publication of Notice of Auction (NOA) & TOR", day: "D1", type: "Publication", phase: "Pre-Auction", date: addDays(START_DATE, 0, 'CD') },
            { step: 2, activity: "Release by ERC of GEAR Price and REPA", day: "D1 + 30 CD", type: "Pricing", phase: "Pre-Auction", date: addDays(START_DATE, 30, 'CD') },
            { step: 3, activity: "Start of Registration of Qualified Suppliers", day: "D1 + 30 WD", type: "Registration", phase: "Registration", date: addDays(START_DATE, 30, 'WD') },
            { step: 4, activity: "Last day of Registration", day: "D31 + 3 WD", type: "Registration", phase: "Registration", date: addDays(START_DATE, 30 + 3, 'WD') },
            { step: 5, activity: "Evaluation of Registration Documents", day: "D34 + 10 WD", type: "Evaluation", phase: "Evaluation", date: addDays(START_DATE, 43, 'WD') }, // Approx cumulative
            { step: 13, activity: "Posting of List of Qualified Bidders", day: "D148 + 1 WD", type: "Publication", phase: "Evaluation", date: addDays(START_DATE, 149, 'WD') },
            { step: 17, activity: "Pre-Bid Conference", day: "D157 + 1 WD", type: "Meeting", phase: "Pre-Bid", date: addDays(START_DATE, 158, 'WD') },
            { step: 19, activity: "Submission of Proof of Posting of Bid Bond", day: "D164 + 10 WD", type: "Financial", phase: "Auction", date: addDays(START_DATE, 174, 'WD') },
            { step: 25, activity: "Auction Proper (Electronic Bidding)", day: "D189 + 1 WD", type: "Auction", phase: "Auction", date: addDays(START_DATE, 190, 'WD') },
            { step: 37, activity: "Issuance of Notice of Award (NOA)", day: "D225 + 5 WD", type: "Award", phase: "Post-Auction", date: addDays(START_DATE, 230, 'WD') },
            { step: 45, activity: "Issuance of Certificate of Award", day: "D543 + 30 WD", type: "Award", phase: "Post-Auction", date: addDays(START_DATE, 573, 'WD') }
        ];

        const gridCapacityData = [
            { region: "Luzon", sub: "Castillejos 230 kV", y2024: 0, y2026: 190, y2028: 590, y2030: 590 },
            { region: "Luzon", sub: "Bataoan 500 kV", y2024: 0, y2026: 0, y2028: 2000, y2030: 2000 },
            { region: "Luzon", sub: "Laoag 500/230 kV", y2024: 0, y2026: 0, y2028: 1850, y2030: 1850 },
            { region: "Luzon", sub: "Tuy 230 kV", y2024: 0, y2026: 1070, y2028: 1070, y2030: 1070 },
            { region: "Visayas", sub: "Corella 230 kV", y2024: 0, y2026: 0, y2028: 600, y2030: 600 },
            { region: "Visayas", sub: "Dumanjug 230 kV", y2024: 0, y2026: 0, y2028: 300, y2030: 300 },
            { region: "Visayas", sub: "Umapad 230 kV", y2024: 0, y2026: 0, y2028: 600, y2030: 600 },
            { region: "Mindanao", sub: "Toril 230 kV", y2024: 300, y2026: 300, y2028: 300, y2030: 300 },
            { region: "Mindanao", sub: "Laguindingan 230 kV", y2024: 0, y2026: 300, y2028: 300, y2030: 300 },
        ];

        const legalProvisions = [
            { title: "Bid Bond Forfeiture", section: "TOR Sec 5.2.2.4", text: "Failure to submit original Bid Bond within 3 days of auction results in disqualification and forfeiture.", severity: "critical" },
            { title: "Failure to Deliver", section: "Annex C Sec 1.8", text: "Failure to deliver committed capacity is a prohibited act subject to penalties under EPIRA.", severity: "critical" },
            { title: "Step-In Rights", section: "Annex F Sec 4", text: "Lenders may designate an Assignee to assume the WESC in case of RE Developer default.", severity: "info" },
            { title: "Grid Advancement", section: "Annex D9.2", text: "Developer must undertake to advance grid connection construction if SIS timeline > DCD.", severity: "warning" },
            { title: "PPA Queuing", section: "TOR Sec 9.1.5", text: "Port usage is subject to PPA queuing. Extensions solely due to Developer pay penalties.", severity: "warning" }
        ];

        const checklistData = [
            { id: "req1", text: "Registration Form (Annex D1)", category: "Registration", source: "Annex D1" },
            { id: "req2", text: "Letter of Intent (Annex D2)", category: "Registration", source: "Annex D2" },
            { id: "req3", text: "Affidavit: No Legal Impediment (Annex D3)", category: "Legal", source: "Annex D3" },
            { id: "req9", text: "Secretary's Certificate (Annex D4)", category: "Legal", source: "Annex D4" },
            { id: "req10", text: "Board Resolution (Annex D5)", category: "Legal", source: "Annex D5" },
            { id: "req13", text: "Supplemental WESC Template (Annex F)", category: "Legal", source: "Annex F" },
            { id: "req4", text: "System Impact Study (SIS) by NGCP", category: "Technical", source: "TOR Sec 2.2.2.4" },
            { id: "req14", text: "Affidavit: Grid Advancement (Annex D9.2)", category: "Technical", source: "Annex D9.2" },
            { id: "req6", text: "Wind Resource Assessment Report (Annex D8.1)", category: "Technical", source: "Annex D8.1" },
            { id: "req11", text: "Affidavit of Undertaking - WRA (Annex D8)", category: "Technical", source: "Annex D8" },
            { id: "req7", text: "OSW Infrastructure Plan (Annex D9)", category: "Infrastructure", source: "Annex D9" },
            { id: "req15", text: "5-Year Work Program (Annex D9.1)", category: "Infrastructure", source: "Annex D9.1" },
            { id: "req16", text: "Letter of Conformity: Ports (Annex H)", category: "Infrastructure", source: "Annex H" },
            { id: "req8", text: "Proof of Posting of Bid Bond", category: "Financial", source: "TOR Sec 5.1.1" },
            { id: "req12", text: "Affidavit: Deliver on Committed Date (Annex D7)", category: "Post-Auction", source: "Annex D7" },
        ];

        // --- Layout Components ---

        const SidebarItem = ({ id, icon, label, active, onClick }) => (
            <button 
                onClick={() => onClick(id)}
                className={`sidebar-link w-full flex items-center gap-3 px-6 py-3 text-sm font-medium transition-all duration-200 ${active ? 'active' : 'text-slate-500'}`}
            >
                <Icon name={icon} size={18} />
                {label}
            </button>
        );

        const MobileNavItem = ({ id, icon, label, active, onClick }) => (
            <button 
                onClick={() => onClick(id)}
                className={`flex flex-col items-center justify-center w-full py-2 ${active ? 'mobile-nav-item active' : 'mobile-nav-item'}`}
            >
                <Icon name={icon} size={20} />
                <span className="text-[10px] mt-1 font-medium">{label}</span>
            </button>
        );

        const StatCard = ({ label, value, sub, color = "emerald" }) => (
            <div className="bg-white rounded-xl card-shadow p-6 border-l-4 border-emerald-500">
                <div className="text-slate-500 text-xs font-semibold uppercase tracking-wider mb-1">{label}</div>
                <div className="text-2xl md:text-3xl font-bold text-slate-900 mb-1">{value}</div>
                {sub && <div className="text-xs text-slate-400 font-mono">{sub}</div>}
            </div>
        );

        // --- Feature Components ---

        const Dashboard = () => (
            <div className="space-y-6 pb-20">
                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                    <StatCard label="Installation Target" value="3,300 MW" sub="2028 - 2030 Period" />
                    <StatCard label="Bid Bond Rate" value="₱100k" sub="Per Megawatt (MW)" />
                    <StatCard label="Perf. Bond Rate" value="2%" sub="Of Project Cost" />
                    <StatCard label="Timeline Start" value="Nov 24, 2025" sub="Official Publication" />
                </div>

                <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div className="lg:col-span-2 bg-white rounded-xl card-shadow p-6">
                        <div className="flex items-center justify-between mb-6">
                            <h3 className="font-bold text-slate-800 flex items-center gap-2">
                                <Icon name="alert" className="text-amber-500"/> Critical Notices
                            </h3>
                            <span className="text-xs bg-amber-100 text-amber-800 px-2 py-1 rounded font-semibold">Action Required</span>
                        </div>
                        <div className="space-y-4">
                            {legalProvisions.filter(p => p.severity === "critical").map((item, i) => (
                                <div key={i} className="p-4 bg-red-50 border-l-4 border-red-500 rounded-r-lg">
                                    <div className="flex justify-between items-start">
                                        <h4 className="font-bold text-red-900 text-sm">{item.title}</h4>
                                        <span className="text-xs font-mono text-red-700 bg-red-100 px-2 py-0.5 rounded">{item.section}</span>
                                    </div>
                                    <p className="text-sm text-red-800 mt-1">{item.text}</p>
                                </div>
                            ))}
                            <div className="p-4 bg-blue-50 border-l-4 border-blue-500 rounded-r-lg">
                                <div className="flex justify-between items-start">
                                    <h4 className="font-bold text-blue-900 text-sm">Supplemental WESC Required</h4>
                                    <span className="text-xs font-mono text-blue-700 bg-blue-100 px-2 py-0.5 rounded">Annex F</span>
                                </div>
                                <p className="text-sm text-blue-800 mt-1">Winning bidders must execute a Supplemental WESC incorporating Lender Step-In Rights post-award.</p>
                            </div>
                        </div>
                    </div>

                    <div className="bg-white rounded-xl card-shadow p-6">
                        <h3 className="font-bold text-slate-800 mb-4 flex items-center gap-2">
                            <Icon name="anchor" className="text-blue-500"/> Port Availability
                        </h3>
                        <div className="space-y-4">
                            <div className="p-4 rounded-lg border border-slate-200 hover:border-blue-400 transition-colors cursor-pointer group">
                                <div className="flex justify-between items-center">
                                    <span className="font-bold text-slate-700">Pambujan Port</span>
                                    <span className="w-2 h-2 rounded-full bg-green-500"></span>
                                </div>
                                <div className="text-xs text-slate-500 mt-1">Mercedes, Camarines Norte</div>
                                <div className="mt-2 text-xs font-medium text-blue-600 group-hover:underline">View Queuing Order →</div>
                            </div>
                            <div className="p-4 rounded-lg border border-slate-200 hover:border-blue-400 transition-colors cursor-pointer group">
                                <div className="flex justify-between items-center">
                                    <span className="font-bold text-slate-700">Sta. Clara Port</span>
                                    <span className="w-2 h-2 rounded-full bg-green-500"></span>
                                </div>
                                <div className="text-xs text-slate-500 mt-1">Batangas City, Batangas</div>
                                <div className="mt-2 text-xs font-medium text-blue-600 group-hover:underline">View Queuing Order →</div>
                            </div>
                        </div>
                        <div className="mt-4 pt-4 border-t border-slate-100 text-xs text-slate-500">
                            * Usage subject to Letter of Conformity (Annex H)
                        </div>
                    </div>
                </div>
            </div>
        );

        const GridCapacity = () => {
            const [filterRegion, setFilterRegion] = useState("All");

            const filtered = gridCapacityData.filter(item => 
                (filterRegion === "All" || item.region === filterRegion)
            );

            const getTotal = (yearKey) => filtered.reduce((acc, curr) => acc + curr[yearKey], 0);

            return (
                <div className="space-y-6 pb-20">
                    <div className="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
                        <div>
                            <h2 className="text-2xl font-bold text-slate-800">Grid Capacity</h2>
                            <p className="text-slate-500 text-sm mt-1">Data Source: Annex E (NGCP)</p>
                        </div>
                        <div className="flex gap-2 overflow-x-auto pb-2 w-full sm:w-auto">
                            {["All", "Luzon", "Visayas", "Mindanao"].map(r => (
                                <button 
                                    key={r}
                                    onClick={() => setFilterRegion(r)}
                                    className={`whitespace-nowrap px-4 py-2 rounded-md text-sm font-medium transition-colors ${filterRegion === r ? 'bg-slate-800 text-white' : 'bg-white border border-slate-300 text-slate-600'}`}
                                >
                                    {r}
                                </button>
                            ))}
                        </div>
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div className="lg:col-span-2 bg-white rounded-xl card-shadow overflow-hidden">
                            <div className="overflow-x-auto">
                                <table className="w-full text-sm text-left">
                                    <thead className="bg-slate-50 text-slate-500 font-medium border-b border-slate-200">
                                        <tr>
                                            <th className="px-6 py-4">Region</th>
                                            <th className="px-6 py-4 min-w-[200px]">Substation / Point</th>
                                            <th className="px-6 py-4 text-right">2026</th>
                                            <th className="px-6 py-4 text-right">2028</th>
                                            <th className="px-6 py-4 text-right">2030</th>
                                        </tr>
                                    </thead>
                                    <tbody className="divide-y divide-slate-100">
                                        {filtered.map((row, i) => (
                                            <tr key={i} className="hover:bg-slate-50">
                                                <td className="px-6 py-3 font-medium text-slate-700">{row.region}</td>
                                                <td className="px-6 py-3 text-slate-600">{row.sub}</td>
                                                <td className="px-6 py-3 text-right font-mono text-slate-500">{row.y2026 > 0 ? row.y2026.toLocaleString() : "-"}</td>
                                                <td className="px-6 py-3 text-right font-mono font-bold text-emerald-600">{row.y2028 > 0 ? row.y2028.toLocaleString() : "-"}</td>
                                                <td className="px-6 py-3 text-right font-mono text-slate-800">{row.y2030 > 0 ? row.y2030.toLocaleString() : "-"}</td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div className="space-y-6">
                            <div className="bg-white rounded-xl card-shadow p-6">
                                <h3 className="font-bold text-slate-800 mb-4">Capacity Trend (MW)</h3>
                                <div className="space-y-4">
                                    {['2024', '2026', '2028', '2030'].map(year => (
                                        <div key={year}>
                                            <div className="flex justify-between text-xs text-slate-500 mb-1">
                                                <span>{year}</span>
                                                <span>{getTotal(`y${year}`).toLocaleString()} MW</span>
                                            </div>
                                            <div className="w-full bg-slate-100 rounded-full h-2">
                                                <div 
                                                    className={`h-2 rounded-full ${year === '2028' ? 'bg-emerald-500' : 'bg-slate-400'}`} 
                                                    style={{width: `${(getTotal(`y${year}`) / 15000) * 100}%`}}
                                                ></div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            <div className="bg-red-50 border border-red-100 rounded-xl p-4">
                                <h3 className="font-bold text-red-900 mb-2 flex items-center gap-2 text-sm">
                                    <Icon name="alert" size={16}/> Annex D9.2 Requirement
                                </h3>
                                <p className="text-xs text-red-800">
                                    If the grid connection timeline in your System Impact Study (SIS) exceeds your committed Delivery Date (DCD), you must submit a <strong>Notarized Affidavit of Undertaking</strong> to advance the interconnection facilities.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const Calculators = () => {
            const [mw, setMw] = useState(100);
            const [capex, setCapex] = useState(150); // M PHP per MW
            const [delayDays, setDelayDays] = useState(30);
            const [bidPrice, setBidPrice] = useState(4.0000);

            const bidBond = mw * 100000;
            const projectCost = mw * capex * 1000000;
            const perfBond = projectCost * 0.02;
            
            const onePercentPB = perfBond * 0.01;
            const dailyPenalty = onePercentPB / 20;
            const totalPenalty = dailyPenalty * delayDays;

            const fmt = (n) => new Intl.NumberFormat('en-PH', { style: 'currency', currency: 'PHP', maximumFractionDigits: 0 }).format(n);

            return (
                <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 pb-20">
                    <div className="space-y-6">
                        <div className="bg-white rounded-xl card-shadow p-6">
                            <h3 className="font-bold text-slate-800 mb-4 flex items-center gap-2">
                                <Icon name="calculator" /> Project Parameters
                            </h3>
                            <div className="space-y-4">
                                <div>
                                    <label className="block text-xs font-bold text-slate-500 uppercase mb-1">Offered Capacity (MW)</label>
                                    <input type="number" value={mw} onChange={e => setMw(Number(e.target.value))} className="input-base" />
                                </div>
                                <div>
                                    <label className="block text-xs font-bold text-slate-500 uppercase mb-1">Est. Project Cost (PHP Million/MW)</label>
                                    <input type="number" value={capex} onChange={e => setCapex(Number(e.target.value))} className="input-base" />
                                    <p className="text-xs text-slate-400 mt-1">*Indicative. Official cost issued via Bid Bulletin.</p>
                                </div>
                                <div>
                                    <label className="block text-xs font-bold text-slate-500 uppercase mb-1">Bid Price (PHP/kWh)</label>
                                    <input type="number" step="0.0001" value={bidPrice} onChange={e => setBidPrice(e.target.value)} className="input-base" />
                                </div>
                            </div>
                        </div>

                        <div className="bg-white rounded-xl card-shadow p-6 border-t-4 border-red-500">
                            <h3 className="font-bold text-slate-800 mb-4 flex items-center gap-2">
                                <Icon name="alert" className="text-red-500"/> Delay Penalty Simulator
                            </h3>
                            <div className="mb-4">
                                <label className="block text-xs font-bold text-slate-500 uppercase mb-1">Hypothetical Delay (Days)</label>
                                <input type="range" min="1" max="365" value={delayDays} onChange={e => setDelayDays(Number(e.target.value))} className="w-full accent-red-500" />
                                <div className="text-right text-sm font-bold text-red-600">{delayDays} Days</div>
                            </div>
                            <div className="flex justify-between items-center p-3 bg-red-50 rounded-lg">
                                <span className="text-sm text-red-800">Total Penalty</span>
                                <span className="text-lg font-bold text-red-700">{fmt(totalPenalty)}</span>
                            </div>
                            <p className="text-xs text-red-400 mt-2">Based on TOR 10.6.7.4.1 (Delay &lt; 1 Year). Penalties double for delay > 1 year.</p>
                        </div>
                    </div>

                    <div className="space-y-6">
                        <div className="bg-slate-900 text-white rounded-xl card-shadow p-6 relative overflow-hidden">
                            <div className="absolute top-0 right-0 p-4 opacity-10">
                                <Icon name="fileText" size={100} />
                            </div>
                            <h3 className="font-bold text-slate-300 mb-6">Financial Requirements</h3>
                            
                            <div className="space-y-6 relative z-10">
                                <div>
                                    <div className="text-sm text-slate-400 uppercase tracking-wider">Bid Bond (Cash/Manager's Check)</div>
                                    <div className="text-3xl font-bold text-emerald-400 mt-1">{fmt(bidBond)}</div>
                                    <div className="text-xs text-slate-500 mt-1">Valid for 120 Days from Auction</div>
                                </div>
                                
                                <div className="w-full h-px bg-slate-700"></div>

                                <div>
                                    <div className="text-sm text-slate-400 uppercase tracking-wider">Performance Bond (2%)</div>
                                    <div className="text-3xl font-bold text-white mt-1">{fmt(perfBond)}</div>
                                    <div className="text-xs text-slate-500 mt-1">Based on Total Project Cost: {fmt(projectCost)}</div>
                                </div>
                            </div>
                        </div>

                        <div className="bg-white rounded-xl card-shadow p-6">
                            <h3 className="font-bold text-slate-800 mb-4">Bid Form Preview</h3>
                            <div className="font-mono text-xs bg-slate-50 p-4 rounded border border-slate-200">
                                <p><strong>PROJECT:</strong> [Your Project Name]</p>
                                <p><strong>CAPACITY:</strong> {mw.toFixed(3)} MW</p>
                                <p><strong>PRICE:</strong> PHP {Number(bidPrice).toFixed(4)} / kWh</p>
                                <p><strong>BOND:</strong> {fmt(bidBond)}</p>
                                <p className="mt-2 pt-2 border-t border-slate-200 text-slate-400">Annex D6 Compliant Format</p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const WorkProgram = () => (
            <div className="space-y-6 pb-20">
                <div className="bg-white rounded-xl card-shadow p-6">
                    <div className="flex flex-col sm:flex-row justify-between items-start sm:items-end gap-4 mb-6">
                        <div>
                            <h2 className="text-xl font-bold text-slate-800">5-Year Work Program</h2>
                            <p className="text-sm text-slate-500">Minimum Durations (Annex D9.1)</p>
                        </div>
                        <div className="text-xs bg-blue-50 text-blue-800 px-3 py-1 rounded-full font-medium">Evaluation Matrix: Pass/Fail</div>
                    </div>

                    <div className="space-y-4 relative overflow-x-auto">
                        <div className="min-w-[600px]">
                            {/* Timeline Header */}
                            <div className="grid grid-cols-12 gap-1 text-xs font-bold text-slate-400 uppercase mb-2">
                                <div className="col-span-4 pl-2">Activity</div>
                                <div className="col-span-8 flex justify-between px-2">
                                    <span>Year 1</span>
                                    <span>Year 2</span>
                                    <span>Year 3</span>
                                    <span>Year 4</span>
                                    <span>Year 5</span>
                                </div>
                            </div>

                            {/* Gantt Bars */}
                            {[
                                { label: "Pre-Dev ECC", start: 0, width: 10, color: "bg-blue-400" },
                                { label: "Wind Resource Assessment", start: 0, width: 20, color: "bg-blue-500" },
                                { label: "System Impact Study (SIS)", start: 5, width: 15, color: "bg-indigo-500" },
                                { label: "Dev Stage ECC", start: 10, width: 20, color: "bg-purple-500" },
                                { label: "Detailed Engineering", start: 25, width: 15, color: "bg-pink-500" },
                                { label: "Financial Close", start: 35, width: 10, color: "bg-rose-500" },
                                { label: "Port Prep & Mobilization", start: 40, width: 10, color: "bg-amber-500" },
                                { label: "Foundation Installation", start: 45, width: 30, color: "bg-emerald-500" },
                                { label: "WTG Installation", start: 60, width: 30, color: "bg-emerald-600" },
                                { label: "Commissioning & Testing", start: 85, width: 15, color: "bg-teal-500" },
                            ].map((item, i) => (
                                <div key={i} className="grid grid-cols-12 gap-1 items-center hover:bg-slate-50 p-1 rounded transition-colors">
                                    <div className="col-span-4 text-sm font-medium text-slate-700 truncate pr-4">{item.label}</div>
                                    <div className="col-span-8 relative h-6 bg-slate-100 rounded overflow-hidden">
                                        <div 
                                            className={`absolute top-1 bottom-1 rounded ${item.color} opacity-80`}
                                            style={{ left: `${item.start}%`, width: `${item.width}%` }}
                                        ></div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                    <div className="mt-6 grid grid-cols-1 sm:grid-cols-2 gap-4 text-xs text-slate-600 bg-slate-50 p-4 rounded-lg">
                        <div>
                            <strong className="block mb-1 text-slate-800">Logical Sequencing Requirements:</strong>
                            <ul className="list-disc list-inside space-y-1">
                                <li>ECC (Development) follows Pre-Dev ECC.</li>
                                <li>Financial Close requires Building Permits.</li>
                                <li>WTG Installation contingent on Foundation completion.</li>
                            </ul>
                        </div>
                        <div>
                            <strong className="block mb-1 text-slate-800">Critical Path:</strong>
                            <p>Port Availability (PPA/Private) must align with foundation fabrication start.</p>
                        </div>
                    </div>
                </div>
            </div>
        );

        const Checklist = () => {
            return (
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6 pb-20">
                    {["Registration", "Technical", "Legal", "Financial"].map(cat => (
                        <div key={cat} className="bg-white rounded-xl card-shadow p-6">
                            <h3 className="font-bold text-slate-800 mb-4 border-b pb-2">{cat} Requirements</h3>
                            <div className="space-y-3">
                                {checklistData.filter(i => i.category === cat || (cat === "Legal" && i.category === "Post-Auction")).map(item => (
                                    <label key={item.id} className="flex items-start gap-3 p-2 hover:bg-slate-50 rounded cursor-pointer">
                                        <input type="checkbox" className="mt-1 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500" />
                                        <div>
                                            <div className="text-sm font-medium text-slate-700">{item.text}</div>
                                            <div className="text-xs text-slate-400 italic">{item.source}</div>
                                        </div>
                                    </label>
                                ))}
                            </div>
                        </div>
                    ))}
                </div>
            );
        }

        // --- Main Layout ---

        const App = () => {
            const [activeTab, setActiveTab] = useState("dashboard");

            return (
                <div className="flex min-h-screen bg-slate-50">
                    {/* Desktop Sidebar */}
                    <div className="w-64 bg-white border-r border-slate-200 hidden md:flex flex-col fixed h-full z-10">
                        <div className="p-6 border-b border-slate-100">
                            <div className="flex items-center gap-3">
                                <div className="bg-emerald-600 text-white p-2 rounded-lg shadow-lg">
                                    <Icon name="wind" size={24} />
                                </div>
                                <div>
                                    <div className="font-bold text-slate-900 leading-tight">GEA-5</div>
                                    <div className="text-xs text-slate-500 font-medium">Portal Pro</div>
                                </div>
                            </div>
                        </div>
                        <div className="flex-1 py-6 space-y-1 overflow-y-auto">
                            <div className="px-6 text-xs font-bold text-slate-400 uppercase mb-2">Main</div>
                            <SidebarItem id="dashboard" icon="dashboard" label="Dashboard" active={activeTab === "dashboard"} onClick={setActiveTab} />
                            <SidebarItem id="grid" icon="zap" label="Grid Capacity" active={activeTab === "grid"} onClick={setActiveTab} />
                            <SidebarItem id="timeline" icon="calendar" label="Timeline" active={activeTab === "timeline"} onClick={setActiveTab} />
                            
                            <div className="px-6 text-xs font-bold text-slate-400 uppercase mb-2 mt-6">Tools</div>
                            <SidebarItem id="calculator" icon="calculator" label="Financial Suite" active={activeTab === "calculator"} onClick={setActiveTab} />
                            <SidebarItem id="workprogram" icon="hardHat" label="Work Program" active={activeTab === "workprogram"} onClick={setActiveTab} />
                            <SidebarItem id="checklist" icon="check" label="Compliance" active={activeTab === "checklist"} onClick={setActiveTab} />
                        </div>
                    </div>

                    {/* Mobile Header */}
                    <div className="md:hidden fixed top-0 left-0 right-0 bg-white border-b border-slate-200 z-20 px-4 py-3 flex justify-between items-center shadow-sm">
                        <div className="font-bold text-slate-800 flex items-center gap-2">
                            <div className="bg-emerald-600 text-white p-1.5 rounded-md">
                                <Icon name="wind" size={18} />
                            </div>
                            <span>GEA-5 Portal</span>
                        </div>
                    </div>

                    {/* Main Content Area */}
                    <div className="flex-1 md:ml-64 p-4 md:p-8 pt-20 md:pt-8">
                        <div className="max-w-6xl mx-auto">
                            {activeTab === "dashboard" && <Dashboard />}
                            {activeTab === "grid" && <GridCapacity />}
                            {activeTab === "calculator" && <Calculators />}
                            {activeTab === "workprogram" && <WorkProgram />}
                            {activeTab === "checklist" && <Checklist />}
                            {activeTab === "timeline" && (
                                <div className="bg-white rounded-xl card-shadow overflow-hidden pb-20">
                                    <div className="p-6 border-b border-slate-100 bg-slate-50 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2">
                                        <div>
                                            <h2 className="text-lg font-bold text-slate-800">Procurement Timeline</h2>
                                            <p className="text-xs text-slate-500">Start Date: Nov 24, 2025 (Calculated)</p>
                                        </div>
                                    </div>
                                    <div className="divide-y divide-slate-100">
                                        {timelineDetails.map((step, i) => (
                                            <div key={i} className="p-4 flex gap-4 hover:bg-slate-50">
                                                <div className="flex flex-col items-center min-w-[3rem]">
                                                    <div className={`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${step.type === "Auction" ? "bg-emerald-100 text-emerald-700" : "bg-slate-100 text-slate-600"}`}>
                                                        {step.step}
                                                    </div>
                                                    {i !== timelineDetails.length - 1 && <div className="w-0.5 h-full bg-slate-200 mt-2"></div>}
                                                </div>
                                                <div>
                                                    <div className="flex flex-wrap gap-2 items-center mb-1">
                                                        <span className="text-xs font-bold uppercase text-slate-500 tracking-wide bg-slate-100 px-2 py-0.5 rounded">{step.date}</span>
                                                        <span className="text-[10px] font-mono text-slate-400">{step.day}</span>
                                                    </div>
                                                    <h4 className="text-sm font-semibold text-slate-800">{step.activity}</h4>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>

                    {/* Mobile Bottom Navigation */}
                    <div className="md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 pb-safe z-30 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]">
                        <div className="flex justify-around items-center">
                            <MobileNavItem id="dashboard" icon="dashboard" label="Home" active={activeTab === "dashboard"} onClick={setActiveTab} />
                            <MobileNavItem id="timeline" icon="calendar" label="Timeline" active={activeTab === "timeline"} onClick={setActiveTab} />
                            <MobileNavItem id="grid" icon="zap" label="Grid" active={activeTab === "grid"} onClick={setActiveTab} />
                            <MobileNavItem id="workprogram" icon="hardHat" label="Plan" active={activeTab === "workprogram"} onClick={setActiveTab} />
                            <MobileNavItem id="calculator" icon="calculator" label="Calc" active={activeTab === "calculator"} onClick={setActiveTab} />
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>